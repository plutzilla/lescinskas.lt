kind: pipeline
name: default

steps:
- name: build
  image: plutzilla/lescinskas.lt:jekyll
  environment:
    JEKYLL_ENV: production
  commands:
    - bundle exec jekyll build
  when:
    branches: [master]
    event: [push]

- name: minify
  image: plutzilla/lescinskas.lt:gulp
  when:
    branches: [master]
    event: [push]
  commands:
    - npm install
    - gulp

image_pull_secrets:
- docker_config
